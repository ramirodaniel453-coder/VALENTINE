<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0">
    <title>For Elsy, With Love ‚ù§Ô∏è</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;700&family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }
        
        :root {
            --primary-pink: #ff3366;
            --secondary-pink: #ff4d8d;
            --light-pink: #fce4ec;
            --dark-purple: #5a3d5c;
            --light-purple: #9d7b9e;
        }
        
        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, var(--light-pink), #f8bbd9);
            min-height: 100vh;
            color: var(--dark-purple);
            overflow-x: hidden;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        
        /* Mobile-first container */
        .container {
            width: 100%;
            padding: 15px;
            margin: 0 auto;
        }
        
        /* Secret Emoji Activation Area */
        .secret-activation {
            position: fixed;
            top: 10px;
            left: 10px;
            z-index: 1001;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 50%;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .secret-activation:active {
            transform: scale(0.9);
        }
        
        .secret-emoji {
            font-size: 1.8rem;
            animation: gentlePulse 2s infinite;
        }
        
        @keyframes gentlePulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }
        
        .click-counter {
            position: absolute;
            top: -8px;
            right: -8px;
            background: var(--primary-pink);
            color: white;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            font-size: 0.8rem;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            display: none;
        }
        
        /* Touch-friendly navigation */
        .nav {
            display: flex;
            justify-content: space-between;
            overflow-x: auto;
            margin-bottom: 20px;
            padding: 15px 10px;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 5px 15px rgba(255, 77, 141, 0.2);
            -webkit-overflow-scrolling: touch;
            scrollbar-width: none;
            gap: 8px;
        }
        
        .nav::-webkit-scrollbar {
            display: none;
        }
        
        .nav-btn {
            padding: 14px 20px;
            border: none;
            background: transparent;
            font-size: 1rem;
            cursor: pointer;
            border-radius: 30px;
            transition: all 0.3s;
            font-weight: 500;
            color: var(--dark-purple);
            white-space: nowrap;
            flex-shrink: 0;
            touch-action: manipulation;
            min-height: 50px;
        }
        
        .nav-btn.active {
            background: linear-gradient(to right, var(--secondary-pink), var(--primary-pink));
            color: white;
            box-shadow: 0 4px 12px rgba(255, 51, 102, 0.3);
        }
        
        .nav-btn:active {
            transform: scale(0.97);
        }
        
        /* HIDDEN Response Tracker Button - Initially hidden */
        #responseNavBtn {
            display: none !important;
        }
        
        /* Page Container */
        .page-container {
            position: relative;
            min-height: 70vh;
        }
        
        .page {
            display: none;
            animation: fadeIn 0.8s ease;
        }
        
        .page.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* Page 1: Welcome - Mobile Optimized */
        .welcome-container {
            background: rgba(255, 255, 255, 0.98);
            border-radius: 20px;
            padding: 30px 20px;
            text-align: center;
            box-shadow: 0 10px 25px rgba(154, 0, 54, 0.15);
            border: 6px solid var(--secondary-pink);
            position: relative;
            overflow: hidden;
        }
        
        .names {
            font-family: 'Dancing Script', cursive;
            font-size: 3rem;
            color: var(--primary-pink);
            margin-bottom: 8px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
            line-height: 1.2;
        }
        
        .and {
            font-size: 2rem;
            color: #ff8ab5;
            margin: 0 10px;
        }
        
        .title {
            font-size: 1.5rem;
            color: var(--dark-purple);
            margin-bottom: 25px;
            padding: 0 10px;
        }
        
        .heart-icon {
            font-size: 3.5rem;
            color: var(--primary-pink);
            margin: 15px 0;
            animation: heartbeat 1.5s infinite;
            display: inline-block;
        }
        
        .invitation-text {
            font-size: 1.1rem;
            line-height: 1.7;
            margin: 25px 0;
            padding: 0 10px;
        }
        
        /* Touch-friendly buttons */
        .love-btn {
            padding: 18px 35px;
            font-size: 1.2rem;
            background: linear-gradient(to right, var(--secondary-pink), var(--primary-pink));
            color: white;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 600;
            box-shadow: 0 5px 15px rgba(255, 77, 141, 0.3);
            margin: 15px auto;
            display: block;
            width: 90%;
            max-width: 350px;
            touch-action: manipulation;
            min-height: 60px;
        }
        
        .love-btn:active {
            transform: scale(0.97);
            box-shadow: 0 3px 10px rgba(255, 77, 141, 0.4);
        }
        
        /* NEW: Photo & Video Gallery Styles */
        .gallery-container {
            background: white;
            border-radius: 20px;
            padding: 25px 20px;
            box-shadow: 0 10px 25px rgba(154, 0, 54, 0.15);
            margin-bottom: 20px;
        }
        
        .gallery-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 25px;
        }
        
        .media-frame {
            position: relative;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            aspect-ratio: 1/1;
            cursor: pointer;
            transition: all 0.3s;
            background: linear-gradient(135deg, #ffd6e7, #ffb3d9);
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .media-frame:hover, .media-frame:active {
            transform: scale(1.05);
            box-shadow: 0 8px 20px rgba(255, 77, 141, 0.3);
        }
        
        .media-frame img, .media-frame video {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s;
        }
        
        .media-frame:hover img, .media-frame:hover video {
            transform: scale(1.1);
        }
        
        .media-type {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 0.7rem;
            z-index: 2;
        }
        
        .media-caption {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 10px;
            font-size: 0.9rem;
            text-align: center;
            transform: translateY(100%);
            transition: transform 0.3s;
        }
        
        .media-frame:hover .media-caption {
            transform: translateY(0);
        }
        
        .add-media-btn {
            background: linear-gradient(135deg, var(--secondary-pink), var(--primary-pink));
            color: white;
            border: none;
            border-radius: 50%;
            width: 60px;
            height: 60px;
            font-size: 2rem;
            cursor: pointer;
            position: fixed;
            bottom: 30px;
            right: 30px;
            z-index: 100;
            box-shadow: 0 5px 15px rgba(255, 77, 141, 0.4);
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .add-media-btn:active {
            transform: scale(0.9);
        }
        
        .media-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            z-index: 2000;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            display: none;
        }
        
        .media-modal img, .media-modal video {
            max-width: 90%;
            max-height: 70%;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        }
        
        .close-modal {
            position: absolute;
            top: 20px;
            right: 20px;
            background: var(--primary-pink);
            color: white;
            border: none;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            font-size: 1.5rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .modal-caption {
            color: white;
            font-size: 1.2rem;
            margin-top: 20px;
            text-align: center;
            max-width: 80%;
        }
        
        .upload-section {
            background: rgba(255, 255, 255, 0.98);
            border-radius: 15px;
            padding: 25px;
            margin-top: 30px;
            display: none;
            border: 3px solid var(--secondary-pink);
        }
        
        .upload-section.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }
        
        .upload-input {
            width: 100%;
            padding: 15px;
            margin: 15px 0;
            border: 2px dashed var(--secondary-pink);
            border-radius: 10px;
            background: #fff9fb;
            font-size: 1rem;
        }
        
        .upload-preview {
            width: 200px;
            height: 200px;
            object-fit: cover;
            border-radius: 10px;
            margin: 15px auto;
            display: block;
            border: 3px solid var(--secondary-pink);
            display: none;
        }
        
        .video-preview {
            width: 200px;
            height: 200px;
            object-fit: cover;
            border-radius: 10px;
            margin: 15px auto;
            display: block;
            border: 3px solid var(--secondary-pink);
            display: none;
        }
        
        .media-type-selector {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin: 20px 0;
        }
        
        .type-btn {
            padding: 12px 25px;
            background: white;
            border: 2px solid var(--secondary-pink);
            border-radius: 30px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 500;
        }
        
        .type-btn.active {
            background: var(--secondary-pink);
            color: white;
        }
        
        /* Mobile-optimized content containers */
        .story-container,
        .messages-container,
        .invitation-container,
        .secret-container,
        .response-container {
            background: white;
            border-radius: 20px;
            padding: 25px 20px;
            box-shadow: 0 10px 25px rgba(154, 0, 54, 0.15);
            margin-bottom: 20px;
        }
        
        .section-title {
            font-family: 'Dancing Script', cursive;
            font-size: 2.5rem;
            color: var(--primary-pink);
            text-align: center;
            margin-bottom: 25px;
            line-height: 1.2;
        }
        
        /* Mobile-optimized memory grid */
        .memory-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 20px;
            margin-top: 25px;
        }
        
        .memory-card {
            background: #fff9fb;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(255, 77, 141, 0.1);
            border-top: 5px solid var(--secondary-pink);
            transition: transform 0.3s;
        }
        
        .memory-card:active {
            transform: scale(0.98);
        }
        
        .memory-title {
            color: var(--primary-pink);
            font-size: 1.4rem;
            margin-bottom: 10px;
        }
        
        /* Love Messages - Mobile Optimized */
        .message-display {
            background: #fff9fb;
            border-radius: 15px;
            padding: 25px 20px;
            margin-top: 25px;
            min-height: 140px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-left: 5px solid var(--secondary-pink);
            word-break: break-word;
        }
        
        .love-message {
            font-family: 'Dancing Script', cursive;
            font-size: 1.8rem;
            color: var(--dark-purple);
            text-align: center;
            line-height: 1.5;
        }
        
        /* Invitation - Mobile Optimized */
        .date-time {
            background: linear-gradient(to right, var(--secondary-pink), var(--primary-pink));
            color: white;
            padding: 20px 15px;
            border-radius: 15px;
            display: block;
            margin: 20px 0;
            font-size: 1.3rem;
            text-align: center;
        }
        
        .rsvp-buttons {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-top: 30px;
        }
        
        .rsvp-btn {
            padding: 20px 30px;
            font-size: 1.3rem;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 600;
            touch-action: manipulation;
            min-height: 65px;
        }
        
        .rsvp-btn:active {
            transform: scale(0.97);
        }
        
        .rsvp-yes {
            background: linear-gradient(to right, #4CAF50, #2E7D32);
            color: white;
            box-shadow: 0 5px 15px rgba(76, 175, 80, 0.3);
        }
        
        .rsvp-no {
            background: linear-gradient(to right, #f44336, #c62828);
            color: white;
            box-shadow: 0 5px 15px rgba(244, 67, 54, 0.3);
        }
        
        /* Secret Message - Mobile Optimized */
        .password-input {
            padding: 18px 25px;
            font-size: 1.3rem;
            border: 2px solid var(--secondary-pink);
            border-radius: 50px;
            width: 100%;
            max-width: 300px;
            margin: 20px auto;
            text-align: center;
            display: block;
            touch-action: manipulation;
        }
        
        .secret-message {
            background: #fff9fb;
            border-radius: 15px;
            padding: 25px 20px;
            margin-top: 25px;
            display: none;
            border: 3px dashed var(--secondary-pink);
        }
        
        /* HIDDEN Response Tracker - Only shown after secret activation */
        .response-container {
            background: white;
            border-radius: 20px;
            padding: 25px 20px;
            text-align: center;
        }
        
        .response-status {
            font-size: 1.2rem;
            margin: 20px 0;
            padding: 15px;
            border-radius: 15px;
            background: #f5f5f5;
        }
        
        .response-icon {
            font-size: 3rem;
            margin-bottom: 15px;
        }
        
        .response-message {
            font-size: 1.3rem;
            font-weight: 500;
            margin: 15px 0;
        }
        
        .check-status-btn {
            padding: 18px 35px;
            font-size: 1.2rem;
            background: linear-gradient(to right, #2196F3, #0D47A1);
            color: white;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 600;
            box-shadow: 0 5px 15px rgba(33, 150, 243, 0.3);
            margin: 20px auto;
            display: block;
            width: 90%;
            max-width: 350px;
            touch-action: manipulation;
            min-height: 60px;
        }
        
        /* Heart animations */
        @keyframes heartbeat {
            0% { transform: scale(1); }
            5% { transform: scale(1.3); }
            10% { transform: scale(1); }
            15% { transform: scale(1.3); }
            20% { transform: scale(1); }
            100% { transform: scale(1); }
        }
        
        .floating-hearts {
            position: fixed;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            pointer-events: none;
            z-index: -1;
        }
        
        .floating-heart {
            position: absolute;
            color: rgba(255, 77, 141, 0.15);
            font-size: 1.5rem;
            animation: float 15s linear infinite;
        }
        
        @keyframes float {
            0% {
                transform: translateY(100vh) rotate(0deg);
                opacity: 0;
            }
            10% {
                opacity: 0.5;
            }
            90% {
                opacity: 0.5;
            }
            100% {
                transform: translateY(-100px) rotate(360deg);
                opacity: 0;
            }
        }
        
        /* Footer */
        .footer {
            text-align: center;
            margin-top: 40px;
            padding: 20px 15px;
            color: var(--light-purple);
            font-size: 0.9rem;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 20px;
            margin-bottom: 20px;
        }
        
        .signature {
            font-family: 'Dancing Script', cursive;
            font-size: 1.8rem;
            color: var(--primary-pink);
            margin-top: 10px;
        }
        
        /* Mobile Notifications */
        .notification {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--primary-pink);
            color: white;
            padding: 15px 25px;
            border-radius: 50px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2);
            z-index: 1000;
            display: none;
            font-weight: 500;
            text-align: center;
            max-width: 90%;
            animation: slideUp 0.5s ease;
        }
        
        @keyframes slideUp {
            from { transform: translateX(-50%) translateY(100px); opacity: 0; }
            to { transform: translateX(-50%) translateY(0); opacity: 1; }
        }
        
        /* Secret Unlock Animation */
        .secret-unlock-animation {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.95);
            z-index: 2000;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            display: none;
        }
        
        .unlock-emoji {
            font-size: 4rem;
            margin-bottom: 20px;
            animation: unlockPulse 1s infinite;
        }
        
        @keyframes unlockPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.3); }
        }
        
        .unlock-message {
            font-size: 2rem;
            font-family: 'Dancing Script', cursive;
            color: var(--primary-pink);
            text-align: center;
            margin-bottom: 30px;
        }
        
        /* Responsive improvements */
        @media (min-width: 768px) {
            .container {
                max-width: 700px;
                padding: 20px;
            }
            
            .names {
                font-size: 4rem;
            }
            
            .section-title {
                font-size: 3rem;
            }
            
            .love-message {
                font-size: 2.2rem;
            }
            
            .memory-grid, .gallery-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .rsvp-buttons {
                flex-direction: row;
                justify-content: center;
            }
            
            .rsvp-btn {
                width: 200px;
            }
            
            .secret-activation {
                top: 20px;
                left: 20px;
                width: 60px;
                height: 60px;
            }
            
            .secret-emoji {
                font-size: 2.2rem;
            }
            
            .gallery-grid {
                grid-template-columns: repeat(3, 1fr);
            }
            
            .upload-preview, .video-preview {
                width: 250px;
                height: 250px;
            }
        }
        
        @media (min-width: 1024px) {
            .container {
                max-width: 900px;
            }
            
            .memory-grid {
                grid-template-columns: repeat(4, 1fr);
            }
            
            .gallery-grid {
                grid-template-columns: repeat(4, 1fr);
            }
            
            .nav {
                justify-content: center;
                gap: 15px;
            }
        }
        
        /* Small phones */
        @media (max-width: 360px) {
            .names {
                font-size: 2.5rem;
            }
            
            .section-title {
                font-size: 2rem;
            }
            
            .heart-icon {
                font-size: 2.8rem;
            }
            
            .love-btn, .rsvp-btn, .check-status-btn {
                font-size: 1.1rem;
                padding: 16px 25px;
            }
            
            .secret-activation {
                width: 45px;
                height: 45px;
            }
            
            .secret-emoji {
                font-size: 1.5rem;
            }
            
            .gallery-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .add-media-btn {
                bottom: 20px;
                right: 20px;
                width: 50px;
                height: 50px;
                font-size: 1.5rem;
            }
        }
        
        /* Orientation handling */
        @media (max-height: 600px) and (orientation: landscape) {
            .nav {
                padding: 10px 15px;
                margin-bottom: 15px;
            }
            
            .nav-btn {
                padding: 10px 15px;
                min-height: 45px;
            }
            
            .welcome-container,
            .story-container,
            .messages-container,
            .invitation-container,
            .secret-container,
            .response-container,
            .gallery-container {
                padding: 20px 15px;
            }
        }
    </style>
</head>
<body>
    <!-- Secret Activation Button (Top Left) -->
    <div class="secret-activation" id="secretActivation">
        <div class="secret-emoji">‚ù§Ô∏è</div>
        <div class="click-counter" id="clickCounter">0</div>
    </div>
    
    <!-- Add Photo/Video Button (Bottom Right) -->
    <button class="add-media-btn" id="addMediaBtn" title="Add photo or video">
        <i class="fas fa-plus"></i>
    </button>
    
    <!-- Media Modal -->
    <div class="media-modal" id="mediaModal">
        <button class="close-modal" id="closeModal">
            <i class="fas fa-times"></i>
        </button>
        <div id="modalContent"></div>
        <div class="modal-caption" id="modalCaption"></div>
    </div>
    
    <!-- Secret Unlock Animation -->
    <div class="secret-unlock-animation" id="secretUnlockAnimation">
        <div class="unlock-emoji">üîì</div>
        <div class="unlock-message">Response Tracker Unlocked!</div>
        <div class="unlock-emoji">üíñ</div>
        <p style="font-size: 1.2rem; color: #666; margin-top: 20px;">Only you can see Elsy's response!</p>
    </div>
    
    <!-- Floating Hearts Background -->
    <div class="floating-hearts" id="floatingHearts"></div>
    
    <!-- Notification -->
    <div class="notification" id="notification"></div>
    
    <div class="container">
        <!-- Navigation (Response button is hidden initially) -->
        <div class="nav" id="nav">
            <button class="nav-btn active" data-page="welcome">
                <i class="fas fa-home"></i> Home
            </button>
            <button class="nav-btn" data-page="story">
                <i class="fas fa-book"></i> Our Story
            </button>
            <button class="nav-btn" data-page="gallery">
                <i class="fas fa-images"></i> Memories
            </button>
            <button class="nav-btn" data-page="messages">
                <i class="fas fa-envelope"></i> Messages
            </button>
            <button class="nav-btn" data-page="invitation">
                <i class="fas fa-calendar-heart"></i> Invitation
            </button>
            <button class="nav-btn" data-page="secret">
                <i class="fas fa-lock"></i> Secret
            </button>
            <!-- HIDDEN Response Tracker Button -->
            <button class="nav-btn" id="responseNavBtn" data-page="response" style="display: none;">
                <i class="fas fa-heartbeat"></i> Response
            </button>
        </div>
        
        <!-- Page Container -->
        <div class="page-container">
            <!-- Page 1: Welcome -->
            <div class="page active" id="welcome">
                <div class="welcome-container">
                    <div class="heart-icon">‚ù§Ô∏è</div>
                    <h1 class="names">Elsy <span class="and">&</span> Lumumba</h1>
                    <p class="title">A Valentine's Day Invitation Straight From My Heart</p>
                    
                    <div class="invitation-text">
                        <p>My dearest Elsy,</p>
                        <p>From the moment you came into my life, everything changed. Colors became brighter, smiles became easier, and every day became a gift.</p>
                        <p>This Valentine's Day, I want to create new memories with you - memories that we'll cherish forever.</p>
                        <p>Will you be my Valentine?</p>
                    </div>
                    
                    <div class="heart-icon" style="font-size: 2.5rem;">üíïüíòüíñüíù</div>
                    
                    <button class="love-btn" onclick="changePage('invitation')">
                        <i class="fas fa-arrow-right"></i> See My Special Invitation
                    </button>
                </div>
            </div>
            
            <!-- Page 2: Our Story -->
            <div class="page" id="story">
                <div class="story-container">
                    <h2 class="section-title">Our Beautiful Journey</h2>
                    
                    <p style="text-align: center; font-size: 1.1rem; margin-bottom: 25px;">
                        Every moment with you, Elsy, has been a chapter in the most beautiful story ever written.
                    </p>
                    
                    <div class="memory-grid">
                        <div class="memory-card">
                            <h3 class="memory-title">The First Time We Met</h3>
                            <p>I remember you being so calm and letting me hold your hand and lead you to the Nganya,That was one of the best moments of my life.</p>
                        </div>
                        
                        <div class="memory-card">
                            <h3 class="memory-title">Our First Laugh Together</h3>
                            <p>That joke I told that made you laugh so hard (KICHWA KUBWA). Your laughter is my favorite sound in the world.</p>
                        </div>
                        
                        <div class="memory-card">
                            <h3 class="memory-title">The First Time I Realized</h3>
                            <p>It hit me suddenly - I was falling in love with you. Your kindness, your intelligence, your beautiful soul captivated me completely.</p>
                        </div>
                        
                        <div class="memory-card">
                            <h3 class="memory-title">Our Future Together</h3>
                            <p>I dream of all the adventures we'll have, the challenges we'll overcome, and the love that will grow stronger every day.</p>
                        </div>
                    </div>
                    
                    <div style="text-align: center; margin-top: 30px;">
                        <button class="love-btn" onclick="addMemory()">
                            <i class="fas fa-plus-circle"></i> Add Our Memory
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- NEW Page 3: Photo & Video Gallery -->
            <div class="page" id="gallery">
                <div class="gallery-container">
                    <h2 class="section-title">Our Special Moments</h2>
                    
                    <p style="text-align: center; font-size: 1.1rem; margin-bottom: 25px;">
                        Every picture and video tells a story of our love. These are moments I'll treasure forever, Elsy.
                    </p>
                    
                    <div class="gallery-grid" id="mediaGallery">
                        <!-- Photos and videos will be dynamically added here -->
                    </div>
                    
                    <div class="upload-section" id="uploadSection">
                        <h3 style="color: var(--primary-pink); text-align: center; margin-bottom: 20px;">
                            <i class="fas fa-cloud-upload-alt"></i> Add Our Memory
                        </h3>
                        
                        <!-- Media Type Selector -->
                        <div class="media-type-selector">
                            <button class="type-btn active" data-type="photo">
                                <i class="fas fa-camera"></i> Photo
                            </button>
                            <button class="type-btn" data-type="video">
                                <i class="fas fa-video"></i> Video
                            </button>
                        </div>
                        
                        <input type="text" class="upload-input" id="mediaCaption" 
                               placeholder="Add a caption for this memory...">
                        
                        <div style="text-align: center; margin: 20px 0;">
                            <label for="mediaUpload" class="love-btn" style="display: inline-block; width: auto; padding: 15px 30px;">
                                <i class="fas fa-folder-open"></i> Choose File
                            </label>
                            <input type="file" id="mediaUpload" accept="image/*,video/*" style="display: none;">
                        </div>
                        
                        <!-- Image Preview -->
                        <img id="imagePreview" class="upload-preview" src="" alt="Photo preview">
                        
                        <!-- Video Preview -->
                        <video id="videoPreview" class="video-preview" controls>
                            Your browser does not support the video tag.
                        </video>
                        
                        <div style="display: flex; gap: 15px; justify-content: center; margin-top: 20px;">
                            <button class="love-btn" onclick="uploadMedia()" style="background: #4CAF50;">
                                <i class="fas fa-check"></i> Add to Gallery
                            </button>
                            <button class="love-btn" onclick="cancelUpload()" style="background: #f44336;">
                                <i class="fas fa-times"></i> Cancel
                            </button>
                        </div>
                        
                        <div style="margin-top: 25px; padding: 15px; background: #fff9fb; border-radius: 10px;">
                            <p style="font-size: 0.9rem; color: #666; text-align: center;">
                                <i class="fas fa-info-circle"></i> 
                                <strong>Tip:</strong> For best results, use short videos (under 30 seconds) and photos under 5MB.
                                Videos will be converted to playable format in the gallery.
                            </p>
                        </div>
                    </div>
                    
                    <div style="text-align: center; margin-top: 40px;">
                        <button class="love-btn" onclick="changePage('messages')">
                            <i class="fas fa-arrow-right"></i> Next: Love Messages
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- Page 4: Love Messages -->
            <div class="page" id="messages">
                <div class="messages-container">
                    <h2 class="section-title">Messages From My Heart</h2>
                    
                    <p style="text-align: center; font-size: 1.1rem; margin-bottom: 25px;">
                        Elsy, every day I find new reasons to love you. Tap the button to discover what's in my heart today.
                    </p>
                    
                    <div style="text-align: center;">
                        <button class="love-btn" onclick="generateLoveMessage()">
                            <i class="fas fa-heart"></i> Get a Love Message for Elsy
                        </button>
                    </div>
                    
                    <div class="message-display">
                        <p id="loveMessageText" class="love-message">
                            Tap the button above to see a special message just for you, my love.
                        </p>
                    </div>
                    
                    <div style="text-align: center; margin-top: 25px;">
                        <button class="love-btn" onclick="sendLoveText()">
                            <i class="fas fa-share-alt"></i> Send This to Lumumba
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- Page 5: Valentine Invitation -->
            <div class="page" id="invitation">
                <div class="invitation-container">
                    <h2 class="section-title">You're Invited!</h2>
                    
                    <div class="heart-icon">üíå</div>
                    
                    <p style="font-size: 1.2rem; line-height: 1.7; margin: 20px 0; text-align: center;">
                        My dearest Elsy,<br>
                        I would be honored if you would be my Valentine this year.<br>
                        Let's create beautiful memories together.
                    </p>
                    
                    <div class="date-time">
                        <p style="font-size: 1.8rem; font-weight: bold;">February 14th</p>
                        <p style="font-size: 1.4rem;">7:00 PM onwards</p>
                        <p style="font-size: 1.1rem; margin-top: 10px;">A special surprise awaits you!</p>
                    </div>
                    
                    <p style="font-size: 1.1rem; margin: 25px 0; color: #666; text-align: center;">
                        Please let me know if you can make it, so I can prepare something truly special for you.
                    </p>
                    
                    <div class="rsvp-buttons">
                        <button class="rsvp-btn rsvp-yes" onclick="rsvp(true)">
                            <i class="fas fa-heart"></i> Yes! I'd Love To!
                        </button>
                        <button class="rsvp-btn rsvp-no" onclick="rsvp(false)">
                            <i class="fas fa-sad-tear"></i> I Can't Make It
                        </button>
                    </div>
                    
                    <div id="rsvpResponse" style="margin-top: 25px; font-size: 1.2rem; display: none; text-align: center;"></div>
                </div>
            </div>
            
            <!-- Page 6: Secret Message -->
            <div class="page" id="secret">
                <div class="secret-container">
                    <h2 class="section-title">A Secret Just For You</h2>
                    
                    <div class="heart-icon">üîê‚ù§Ô∏è</div>
                    
                    <p style="font-size: 1.1rem; margin: 20px 0; text-align: center;">
                        To unlock a special secret message, enter your m-pesa pin<br>
                        (your m-pesa pin)
                    </p>
                    
                    <input type="password" class="password-input" id="secretPassword" 
                           placeholder="Enter our special date" maxlength="4" inputmode="numeric">
                    
                    <div style="text-align: center;">
                        <button class="love-btn" onclick="checkPassword()">
                            <i class="fas fa-unlock"></i> Unlock Secret Message
                        </button>
                    </div>
                    
                    <div id="secretMessage" class="secret-message">
                        <p id="secretMessageText" class="love-message"></p>
                    </div>
                    
                    <div style="margin-top: 25px; font-size: 0.9rem; color: #888; text-align: center;">
                        <p>Hint: Think about when you first gave me your phone to transact</p>
                    </div>
                </div>
            </div>
            
            <!-- Page 7: HIDDEN Response Tracker -->
            <div class="page" id="response">
                <div class="response-container">
                    <h2 class="section-title">Response Tracker üîí</h2>
                    
                    <div class="heart-icon">
                        <i class="fas fa-user-secret"></i>
                    </div>
                    
                    <p style="font-size: 1.2rem; margin-bottom: 20px; text-align: center;">
                        <strong>Secret Access Only!</strong><br>
                        Only you (Lumumba) can see if Elsy has accepted your Valentine's invitation.
                    </p>
                    
                    <div class="response-status" id="responseStatus">
                        <p>Checking Elsy's response status...</p>
                    </div>
                    
                    <div id="responseMessage" style="display: none;">
                        <div class="response-icon" id="responseIcon">üíñ</div>
                        <div class="response-message" id="responseText"></div>
                        <div id="responseTime" style="color: #666; font-size: 1rem;"></div>
                    </div>
                    
                    <button class="check-status-btn" onclick="checkResponseStatus()">
                        <i class="fas fa-sync-alt"></i> Check Response Status
                    </button>
                    
                    <div style="margin-top: 30px; padding: 15px; background: #f9f9f9; border-radius: 15px;">
                        <h3 style="color: var(--primary-pink); margin-bottom: 10px;">How it works:</h3>
                        <p style="font-size: 0.95rem;">When Elsy clicks "Yes! I'd Love To!" on the invitation page, her response is secretly recorded. Only you can access this page by clicking the ‚ù§Ô∏è emoji three times.</p>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="footer">
            <p>Made with all my love for the most amazing woman in the world</p>
            <p class="signature">Forever yours, Lumumba ‚ù§Ô∏è</p>
        </div>
    </div>

    <script>
        // Initialize response tracking
        let elsyResponse = {
            accepted: false,
            timestamp: null,
            message: ""
        };
        
        // Secret activation tracking
        let clickCount = 0;
        let responseUnlocked = false;
        
        // Current media type (photo or video)
        let currentMediaType = "photo";
        
        // Media gallery data
        let mediaGallery = [
            {
                id: 1,
                type: "photo",
                src: "https://images.unsplash.com/photo-1518568814500-bf0f8d125f46?w=400&h=400&fit=crop&crop=face",
                caption: "Our first date - I was so nervous but you made it perfect"
            },
            {
                id: 2,
                type: "photo",
                src: "https://images.unsplash.com/photo-1511988617509-a57c8a288659?w=400&h=400&fit=crop",
                caption: "That day at the beach - the sunset matched your smile"
            },
            {
                id: 3,
                type: "photo",
                src: "https://images.unsplash.com/photo-1529254479751-fbacb4c7a587?w-400&h=400&fit=crop",
                caption: "Our first anniversary dinner - you took my breath away"
            },
            {
                id: 4,
                type: "video",
                src: "https://assets.mixkit.co/videos/preview/mixkit-couple-having-fun-at-a-fair-7254-large.mp4",
                caption: "That fun day at the fair - you winning me that teddy bear",
                thumbnail: "https://images.unsplash.com/photo-1530103862676-de8c9debad1d?w=400&h=400&fit=crop"
            },
            {
                id: 5,
                type: "photo",
                src: "https://images.unsplash.com/photo-1526417501783-5d6c2cbf6e73?w=400&h=400&fit=crop",
                caption: "Our weekend getaway - just you, me, and endless conversations"
            },
            {
                id: 6,
                type: "video",
                src: "https://assets.mixkit.co/videos/preview/mixkit-couple-walking-and-hugging-on-the-beach-7565-large.mp4",
                caption: "Walking hand in hand on the beach at sunset",
                thumbnail: "https://images.unsplash.com/photo-1506929562872-bb421503ef21?w=400&h=400&fit=crop"
            }
        ];
        
        // Save response to localStorage
        function saveResponse(accepted) {
            elsyResponse.accepted = accepted;
            elsyResponse.timestamp = new Date().toISOString();
            elsyResponse.message = accepted ? 
                "Elsy has accepted your Valentine's invitation! üíñ" : 
                "Elsy has declined your invitation. üò¢";
            
            // Save to localStorage
            localStorage.setItem('elsyValentineResponse', JSON.stringify(elsyResponse));
            
            // Also save to a more persistent way (simulated server)
            simulateServerSave(elsyResponse);
        }
        
        // Initialize media gallery
        function initializeMediaGallery() {
            const gallery = document.getElementById('mediaGallery');
            
            // Load saved media from localStorage if available
            const savedMedia = localStorage.getItem('elsyLumumbaMedia');
            if (savedMedia) {
                mediaGallery = JSON.parse(savedMedia);
            }
            
            // Clear gallery
            gallery.innerHTML = '';
            
            // Add media to gallery
            mediaGallery.forEach(media => {
                const mediaElement = document.createElement('div');
                mediaElement.className = 'media-frame';
                mediaElement.dataset.id = media.id;
                
                // Create thumbnail or video element
                let mediaContent = '';
                if (media.type === 'photo') {
                    mediaContent = `<img src="${media.src}" alt="Memory photo" loading="lazy">`;
                } else if (media.type === 'video') {
                    // Use thumbnail if available, otherwise first frame of video
                    const thumbnail = media.thumbnail || media.src;
                    mediaContent = `
                        <video preload="metadata" poster="${thumbnail}">
                            <source src="${media.src}" type="video/mp4">
                        </video>
                    `;
                }
                
                mediaElement.innerHTML = `
                    ${mediaContent}
                    <div class="media-type">${media.type === 'photo' ? 'üì∑ Photo' : 'üé• Video'}</div>
                    <div class="media-caption">${media.caption}</div>
                `;
                
                mediaElement.addEventListener('click', () => openMediaModal(media));
                gallery.appendChild(mediaElement);
            });
            
            // Add "add media" button to gallery
            const addMediaElement = document.createElement('div');
            addMediaElement.className = 'media-frame';
            addMediaElement.innerHTML = `
                <div style="color: var(--primary-pink); font-size: 3rem;">
                    <i class="fas fa-plus"></i>
                </div>
                <div class="media-caption">Add our memory</div>
            `;
            addMediaElement.addEventListener('click', () => showUploadSection());
            gallery.appendChild(addMediaElement);
        }
        
        // Open media modal
        function openMediaModal(media) {
            const modal = document.getElementById('mediaModal');
            const modalContent = document.getElementById('modalContent');
            const modalCaption = document.getElementById('modalCaption');
            
            // Clear previous content
            modalContent.innerHTML = '';
            
            if (media.type === 'photo') {
                const img = document.createElement('img');
                img.src = media.src;
                img.alt = media.caption;
                modalContent.appendChild(img);
            } else if (media.type === 'video') {
                const video = document.createElement('video');
                video.src = media.src;
                video.controls = true;
                video.autoplay = true;
                video.style.maxWidth = '90%';
                video.style.maxHeight = '70%';
                modalContent.appendChild(video);
            }
            
            modalCaption.textContent = media.caption;
            modal.style.display = 'flex';
        }
        
        // Show upload section
        function showUploadSection() {
            const uploadSection = document.getElementById('uploadSection');
            uploadSection.classList.add('active');
            
            // Reset to photo type by default
            setMediaType('photo');
            
            // Scroll to upload section
            uploadSection.scrollIntoView({ behavior: 'smooth' });
        }
        
        // Set media type (photo or video)
        function setMediaType(type) {
            currentMediaType = type;
            
            // Update active button
            document.querySelectorAll('.type-btn').forEach(btn => {
                btn.classList.remove('active');
                if (btn.dataset.type === type) {
                    btn.classList.add('active');
                }
            });
            
            // Update file input accept attribute
            const fileInput = document.getElementById('mediaUpload');
            if (type === 'photo') {
                fileInput.accept = "image/*";
                fileInput.setAttribute('accept', 'image/*');
            } else {
                fileInput.accept = "video/*";
                fileInput.setAttribute('accept', 'video/*');
            }
            
            // Clear previews
            document.getElementById('imagePreview').style.display = 'none';
            document.getElementById('videoPreview').style.display = 'none';
            fileInput.value = '';
        }
        
        // Cancel upload
        function cancelUpload() {
            const uploadSection = document.getElementById('uploadSection');
            uploadSection.classList.remove('active');
            
            // Reset form
            document.getElementById('mediaCaption').value = '';
            document.getElementById('mediaUpload').value = '';
            document.getElementById('imagePreview').style.display = 'none';
            document.getElementById('imagePreview').src = '';
            document.getElementById('videoPreview').style.display = 'none';
            document.getElementById('videoPreview').src = '';
        }
        
        // Handle media upload
        function uploadMedia() {
            const caption = document.getElementById('mediaCaption').value.trim();
            const fileInput = document.getElementById('mediaUpload');
            const imagePreview = document.getElementById('imagePreview');
            const videoPreview = document.getElementById('videoPreview');
            
            if (!fileInput.files[0]) {
                showNotification("Please choose a file first! üìÅ");
                return;
            }
            
            if (!caption) {
                showNotification("Please add a caption for this memory! üí≠");
                return;
            }
            
            const file = fileInput.files[0];
            const reader = new FileReader();
            
            reader.onload = function(e) {
                const mediaData = e.target.result;
                
                if (currentMediaType === 'photo') {
                    addMediaToGallery(mediaData, caption, 'photo');
                } else {
                    // For videos, we need to create a thumbnail
                    createVideoThumbnail(file, function(thumbnailData) {
                        addMediaToGallery(mediaData, caption, 'video', thumbnailData);
                    });
                }
            };
            
            if (currentMediaType === 'photo') {
                reader.readAsDataURL(file);
            } else {
                // For videos, read as data URL
                reader.readAsDataURL(file);
            }
        }
        
        // Create thumbnail for video
        function createVideoThumbnail(file, callback) {
            const video = document.createElement('video');
            video.preload = 'metadata';
            
            video.onloadedmetadata = function() {
                // Set video to 0.1 seconds to get a frame
                video.currentTime = 0.1;
            };
            
            video.onseeked = function() {
                const canvas = document.createElement('canvas');
                canvas.width = video.videoWidth;
                canvas.height = video.videoHeight;
                const ctx = canvas.getContext('2d');
                ctx.drawImage(video, 0, 0, canvas.width, canvas.height);
                
                const thumbnailData = canvas.toDataURL('image/jpeg');
                callback(thumbnailData);
            };
            
            video.src = URL.createObjectURL(file);
        }
        
        // Add media to gallery
        function addMediaToGallery(src, caption, type, thumbnail = null) {
            const newMedia = {
                id: Date.now(), // Simple unique ID
                type: type,
                src: src,
                caption: caption,
                thumbnail: thumbnail
            };
            
            mediaGallery.push(newMedia);
            
            // Save to localStorage (limited to 10MB total)
            try {
                localStorage.setItem('elsyLumumbaMedia', JSON.stringify(mediaGallery));
            } catch (e) {
                if (e.name === 'QuotaExceededError') {
                    showNotification("Storage full! Oldest memories will be removed.");
                    // Remove oldest items to make space
                    mediaGallery.shift();
                    localStorage.setItem('elsyLumumbaMedia', JSON.stringify(mediaGallery));
                }
            }
            
            // Reinitialize gallery
            initializeMediaGallery();
            
            // Close upload section
            cancelUpload();
            
            // Show success message
            const mediaTypeText = type === 'photo' ? 'Photo' : 'Video';
            showNotification(`${mediaTypeText} added to our gallery! ${type === 'photo' ? 'üì∏' : 'üé•'}üíñ`);
            
            // Create celebration effect
            for (let i = 0; i < 10; i++) {
                setTimeout(() => createHeartEffect(), i * 100);
            }
        }
        
        // Setup media upload preview
        function setupMediaUpload() {
            const fileInput = document.getElementById('mediaUpload');
            const imagePreview = document.getElementById('imagePreview');
            const videoPreview = document.getElementById('videoPreview');
            
            fileInput.addEventListener('change', function() {
                if (this.files && this.files[0]) {
                    const file = this.files[0];
                    const reader = new FileReader();
                    
                    if (currentMediaType === 'photo') {
                        reader.onload = function(e) {
                            imagePreview.src = e.target.result;
                            imagePreview.style.display = 'block';
                            videoPreview.style.display = 'none';
                        };
                        reader.readAsDataURL(file);
                    } else {
                        // For videos, show video preview
                        const videoURL = URL.createObjectURL(file);
                        videoPreview.src = videoURL;
                        videoPreview.style.display = 'block';
                        imagePreview.style.display = 'none';
                        
                        // Also load the video to create thumbnail later
                        reader.onload = function(e) {
                            // Data URL is stored for later use
                        };
                        reader.readAsDataURL(file);
                    }
                }
            });
            
            // Setup modal close button
            document.getElementById('closeModal').addEventListener('click', function() {
                document.getElementById('mediaModal').style.display = 'none';
                // Pause any playing video
                const video = document.querySelector('#mediaModal video');
                if (video) {
                    video.pause();
                }
            });
            
            // Setup add media button
            document.getElementById('addMediaBtn').addEventListener('click', function() {
                changePage('gallery');
                setTimeout(() => showUploadSection(), 500);
            });
            
            // Setup media type buttons
            document.querySelectorAll('.type-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    setMediaType(this.dataset.type);
                });
            });
            
            // Close modal when clicking outside content
            document.getElementById('mediaModal').addEventListener('click', function(e) {
                if (e.target === this) {
                    this.style.display = 'none';
                    // Pause any playing video
                    const video = document.querySelector('#mediaModal video');
                    if (video) {
                        video.pause();
                    }
                }
            });
        }
        
        // Check response status
        function checkResponseStatus() {
            // Check localStorage first
            const savedResponse = localStorage.getItem('elsyValentineResponse');
            
            if (savedResponse) {
                elsyResponse = JSON.parse(savedResponse);
            }
            
            const responseStatus = document.getElementById('responseStatus');
            const responseMessage = document.getElementById('responseMessage');
            const responseIcon = document.getElementById('responseIcon');
            const responseText = document.getElementById('responseText');
            const responseTime = document.getElementById('responseTime');
            
            if (elsyResponse.accepted) {
                responseStatus.style.display = 'none';
                responseMessage.style.display = 'block';
                responseIcon.innerHTML = 'üíñüéâ';
                responseText.innerHTML = "YES! Elsy has accepted your Valentine's invitation!";
                responseText.style.color = '#4CAF50';
                
                if (elsyResponse.timestamp) {
                    const date = new Date(elsyResponse.timestamp);
                    responseTime.innerHTML = `She accepted on ${date.toLocaleDateString()} at ${date.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})}`;
                }
                
                // Celebration effect
                createCelebrationEffect();
            } else if (elsyResponse.timestamp) {
                responseStatus.style.display = 'none';
                responseMessage.style.display = 'block';
                responseIcon.innerHTML = 'üò¢';
                responseText.innerHTML = "Elsy hasn't accepted yet, or she declined the invitation.";
                responseText.style.color = '#f44336';
                
                if (elsyResponse.timestamp) {
                    const date = new Date(elsyResponse.timestamp);
                    responseTime.innerHTML = `Last checked: ${date.toLocaleDateString()} ${date.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})}`;
                }
            } else {
                responseStatus.innerHTML = "<p>Elsy hasn't responded yet. Check back after she visits the invitation page!</p>";
                responseMessage.style.display = 'none';
            }
            
            // Animate the check button
            const checkBtn = document.querySelector('.check-status-btn');
            checkBtn.innerHTML = '<i class="fas fa-check"></i> Status Updated';
            checkBtn.style.background = 'linear-gradient(to right, #4CAF50, #2E7D32)';
            
            setTimeout(() => {
                checkBtn.innerHTML = '<i class="fas fa-sync-alt"></i> Check Response Status';
                checkBtn.style.background = 'linear-gradient(to right, #2196F50, #0D47A1)';
            }, 2000);
        }
        
        // Secret activation function - CLICK THE HEART EMOJI 3 TIMES
        function setupSecretActivation() {
            const secretActivation = document.getElementById('secretActivation');
            const clickCounter = document.getElementById('clickCounter');
            
            secretActivation.addEventListener('click', (e) => {
                e.preventDefault();
                clickCount++;
                
                // Show click counter
                clickCounter.textContent = clickCount;
                clickCounter.style.display = 'flex';
                
                // Create a small heart effect
                createMiniHeartEffect(e.clientX, e.clientY);
                
                // Show notification based on clicks
                if (clickCount === 1) {
                    showNotification("üíñ One click...");
                } else if (clickCount === 2) {
                    showNotification("üíñüíñ Two clicks...");
                } else if (clickCount === 3) {
                    // UNLOCK THE RESPONSE TRACKER!
                    unlockResponseTracker();
                } else if (clickCount > 3) {
                    showNotification("Response tracker already unlocked! üíñ");
                }
                
                // Reset counter after 3 seconds if not reached 3
                if (clickCount < 3) {
                    clearTimeout(window.clickResetTimer);
                    window.clickResetTimer = setTimeout(() => {
                        clickCount = 0;
                        clickCounter.style.display = 'none';
                    }, 3000);
                }
            });
        }
        
        // Unlock the response tracker
        function unlockResponseTracker() {
            responseUnlocked = true;
            
            // Save to localStorage so it stays unlocked
            localStorage.setItem('responseTrackerUnlocked', 'true');
            
            // Show unlock animation
            const unlockAnimation = document.getElementById('secretUnlockAnimation');
            unlockAnimation.style.display = 'flex';
            
            // Show the response button in navigation
            const responseNavBtn = document.getElementById('responseNavBtn');
            responseNavBtn.style.display = 'block';
            
            // Create celebration effect
            createUnlockCelebration();
            
            // Hide animation after 3 seconds
            setTimeout(() => {
                unlockAnimation.style.display = 'none';
                showNotification("Response Tracker unlocked! Check the navigation! üîì");
            }, 3000);
        }
        
        // Check if already unlocked
        function checkIfUnlocked() {
            const isUnlocked = localStorage.getItem('responseTrackerUnlocked');
            if (isUnlocked === 'true') {
                responseUnlocked = true;
                document.getElementById('responseNavBtn').style.display = 'block';
            }
        }
        
        // Create mini heart effect for clicks
        function createMiniHeartEffect(x, y) {
            const heart = document.createElement('div');
            heart.innerHTML = '‚ù§Ô∏è';
            heart.style.position = 'fixed';
            heart.style.fontSize = '1.5rem';
            heart.style.color = '#ff3366';
            heart.style.zIndex = '10000';
            heart.style.left = `${x}px`;
            heart.style.top = `${y}px`;
            heart.style.transform = 'translate(-50%, -50%)';
            heart.style.pointerEvents = 'none';
            
            document.body.appendChild(heart);
            
            // Animate the heart
            const animation = heart.animate([
                { transform: 'translate(-50%, -50%) scale(1)', opacity: 1 },
                { transform: 'translate(-50%, -100px) scale(1.5)', opacity: 0 }
            ], {
                duration: 1000,
                easing: 'ease-out'
            });
            
            // Remove after animation
            animation.onfinish = () => {
                if (document.body.contains(heart)) {
                    document.body.removeChild(heart);
                }
            };
        }
        
        // Create unlock celebration
        function createUnlockCelebration() {
            // Create lots of hearts
            for (let i = 0; i < 25; i++) {
                setTimeout(() => {
                    const heart = document.createElement('div');
                    heart.innerHTML = 'üíñ';
                    heart.style.position = 'fixed';
                    heart.style.fontSize = '2rem';
                    heart.style.color = '#ff3366';
                    heart.style.zIndex = '10000';
                    heart.style.left = `${Math.random() * 100}%`;
                    heart.style.top = `${Math.random() * 100}%`;
                    heart.style.pointerEvents = 'none';
                    
                    document.body.appendChild(heart);
                    
                    // Animate
                    const anim = heart.animate([
                        { transform: 'translateY(0) scale(1)', opacity: 1 },
                        { transform: 'translateY(-200px) scale(2)', opacity: 0 }
                    ], {
                        duration: 2000,
                        easing: 'ease-out'
                    });
                    
                    anim.onfinish = () => {
                        if (document.body.contains(heart)) {
                            document.body.removeChild(heart);
                        }
                    };
                }, i * 100);
            }
            
            // Add some unlock emojis
            for (let i = 0; i < 10; i++) {
                setTimeout(() => {
                    const emoji = document.createElement('div');
                    emoji.innerHTML = 'üîì';
                    emoji.style.position = 'fixed';
                    emoji.style.fontSize = '2.5rem';
                    emoji.style.zIndex = '10000';
                    emoji.style.left = `${Math.random() * 100}%`;
                    emoji.style.top = `${Math.random() * 100}%`;
                    emoji.style.pointerEvents = 'none';
                    
                    document.body.appendChild(emoji);
                    
                    const anim = emoji.animate([
                        { transform: 'translateY(0) scale(1)', opacity: 1 },
                        { transform: 'translateY(-150px) scale(1.8)', opacity: 0 }
                    ], {
                        duration: 2500,
                        easing: 'ease-out'
                    });
                    
                    anim.onfinish = () => {
                        if (document.body.contains(emoji)) {
                            document.body.removeChild(emoji);
                        }
                    };
                }, i * 150);
            }
        }
        
        // Simulate server save
        function simulateServerSave(response) {
            console.log("Response saved to server:", response);
        }
        
        // Create floating hearts
        function createFloatingHearts() {
            const floatingHeartsContainer = document.getElementById('floatingHearts');
            const heartCount = window.innerWidth < 768 ? 15 : 25;
            
            for (let i = 0; i < heartCount; i++) {
                const heart = document.createElement('div');
                heart.classList.add('floating-heart');
                heart.innerHTML = '‚ù§Ô∏è';
                heart.style.left = `${Math.random() * 100}%`;
                heart.style.animationDuration = `${Math.random() * 20 + 15}s`;
                heart.style.animationDelay = `${Math.random() * 10}s`;
                heart.style.fontSize = `${Math.random() * 1.5 + 1}rem`;
                floatingHeartsContainer.appendChild(heart);
            }
        }
        
        // Navigation
        function setupNavigation() {
            const navButtons = document.querySelectorAll('.nav-btn');
            const pages = document.querySelectorAll('.page');
            
            navButtons.forEach(button => {
                button.addEventListener('click', (e) => {
                    e.preventDefault();
                    const pageId = button.getAttribute('data-page');
                    changePage(pageId);
                });
            });
            
            // Set initial response status if unlocked
            if (responseUnlocked) {
                checkResponseStatus();
            }
        }
        
        function changePage(pageId) {
            // Update active button
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('active');
                if (btn.getAttribute('data-page') === pageId) {
                    btn.classList.add('active');
                }
            });
            
            // Show active page
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
                if (page.id === pageId) {
                    page.classList.add('active');
                }
            });
            
            // Special effects for certain pages
            if (pageId === 'messages') {
                generateLoveMessage();
            } else if (pageId === 'response' && responseUnlocked) {
                checkResponseStatus();
            } else if (pageId === 'gallery') {
                // Initialize gallery when page is shown
                initializeMediaGallery();
            }
        }
        
        // Love Messages
        const loveMessages = [
            "Elsy, your smile is the first thing I think of when I wake up and the last thing I dream about at night.",
            "Every moment with you feels like a beautiful dream I never want to wake up from.",
            "If I had to choose between breathing and loving you, I would use my last breath to tell you I love you.",
            "You are the missing piece I never knew I was searching for, Elsy.",
            "My love for you grows stronger with each passing day, like a river that never runs dry.",
            "In your eyes, I found my home. In your heart, I found my peace.",
            "Elsy, you are the reason I believe in soulmates. We were meant to find each other.",
            "Loving you is the easiest and most natural thing I've ever done.",
            "If love were a journey, I'd travel the world with you, hand in hand, forever.",
            "You are my today and all of my tomorrows, Elsy.",
            "With you, I've found a love that feels like coming home after a long journey.",
            "Your laughter is my favorite melody, your smile my greatest treasure.",
            "I fall in love with you more every single day, in ways I never thought possible.",
            "You are the beautiful beginning of everything wonderful in my life.",
            "My heart recognizes your heart as its other half. We are two souls but one heart."
        ];
        
        function generateLoveMessage() {
            const randomIndex = Math.floor(Math.random() * loveMessages.length);
            const message = loveMessages[randomIndex];
            document.getElementById('loveMessageText').textContent = message;
            
            // Add heart animation
            createHeartEffect();
        }
        
        function sendLoveText() {
            const message = document.getElementById('loveMessageText').textContent;
            const textToCopy = `üíå For Lumumba: ${message} - Love, Elsy üíñ`;
            
            if (navigator.clipboard && navigator.clipboard.writeText) {
                navigator.clipboard.writeText(textToCopy)
                    .then(() => {
                        showNotification("Message copied! Send it to Lumumba! üíñ");
                    })
                    .catch(err => {
                        fallbackCopy(textToCopy);
                    });
            } else {
                fallbackCopy(textToCopy);
            }
        }
        
        function fallbackCopy(text) {
            const textArea = document.createElement("textarea");
            textArea.value = text;
            document.body.appendChild(textArea);
            textArea.select();
            
            try {
                document.execCommand('copy');
                showNotification("Message copied! Send it to Lumumba! üíñ");
            } catch (err) {
                showNotification("Select and copy the message to share with Lumumba!");
            }
            
            document.body.removeChild(textArea);
        }
        
        // RSVP Function
        function rsvp(response) {
            const rsvpResponse = document.getElementById('rsvpResponse');
            
            // Save Elsy's response
            saveResponse(response);
            
            if (response) {
                rsvpResponse.innerHTML = `
                    <div style="color: #4CAF50; font-weight: bold; padding: 15px; background: #e8f5e9; border-radius: 15px;">
                        <div style="font-size: 2rem;">üíñüéâ</div>
                        <p style="font-size: 1.4rem;">You've made me the happiest man in the world!</p>
                        <p style="font-size: 1rem; margin-top: 10px;">I'll be in touch with all the details for our special Valentine's Day!</p>
                    </div>
                `;
                
                // Show celebration
                createCelebrationEffect();
                showNotification("Your response has been recorded! üíñ");
            } else {
                rsvpResponse.innerHTML = `
                    <div style="color: #f44336; padding: 15px; background: #ffebee; border-radius: 15px;">
                        <div style="font-size: 2rem;">üò¢</div>
                        <p style="font-size: 1.4rem;">My heart is a little broken, but I understand.</p>
                        <p style="font-size: 1rem; margin-top: 10px;">Maybe we can celebrate another time?</p>
                    </div>
                `;
            }
            
            rsvpResponse.style.display = 'block';
        }
        
        // Secret Message
        function checkPassword() {
            const password = document.getElementById('secretPassword').value;
            const secretMessage = document.getElementById('secretMessage');
            const secretMessageText = document.getElementById('secretMessageText');
            
            // CHANGE THIS TO YOUR ACTUAL FIRST DATE!
            if (password === "0214" || password === "1234") {
                secretMessage.style.display = 'block';
                secretMessageText.textContent = "Elsy, my love for you is eternal. No matter what happens, no matter where life takes us, my heart will always belong to you. This Valentine's Day is just the beginning of forever. I love you more than words could ever express. üíñ Forever yours, Lumumba";
                createHeartEffect();
                
                // Create a shower of hearts
                for (let i = 0; i < 15; i++) {
                    setTimeout(() => createHeartEffect(), i * 100);
                }
            } else {
                showNotification("That's not our special date, my love. Try again! üíñ");
            }
        }
        
        // Memory Function
        function addMemory() {
            const memory = prompt("Elsy, what's a special memory you'd like to add to our story?");
            if (memory && memory.trim() !== "") {
                showNotification("Thank you for sharing that beautiful memory! üíñ");
            }
        }
        
        // Heart Effect
        function createHeartEffect() {
            const heart = document.createElement('div');
            heart.innerHTML = '‚ù§Ô∏è';
            heart.style.position = 'fixed';
            heart.style.fontSize = '2rem';
            heart.style.color = '#ff3366';
            heart.style.zIndex = '10000';
            heart.style.left = `${Math.random() * 80 + 10}%`;
            heart.style.top = `${Math.random() * 80 + 10}%`;
            heart.style.pointerEvents = 'none';
            
            document.body.appendChild(heart);
            
            // Animate the heart
            const animation = heart.animate([
                { transform: 'translateY(0) scale(1)', opacity: 1 },
                { transform: 'translateY(-100px) scale(1.5)', opacity: 0 }
            ], {
                duration: 1500,
                easing: 'ease-out'
            });
            
            // Remove after animation
            animation.onfinish = () => {
                if (document.body.contains(heart)) {
                    document.body.removeChild(heart);
                }
            };
        }
        
        // Celebration Effect for acceptance
        function createCelebrationEffect() {
            for (let i = 0; i < 20; i++) {
                setTimeout(() => {
                    createHeartEffect();
                }, i * 100);
            }
        }
        
        // Notification system
        function showNotification(message) {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.style.display = 'block';
            
            setTimeout(() => {
                notification.style.display = 'none';
            }, 3000);
        }
        
        // Initialize everything
        window.addEventListener('DOMContentLoaded', () => {
            createFloatingHearts();
            generateLoveMessage();
            setupSecretActivation();
            checkIfUnlocked();
            setupNavigation();
            setupMediaUpload();
            initializeMediaGallery();
            
            // Check for saved response on load
            const savedResponse = localStorage.getItem('elsyValentineResponse');
            if (savedResponse) {
                elsyResponse = JSON.parse(savedResponse);
            }
            
            // Add heartbeat animation to all heart icons
            document.querySelectorAll('.heart-icon').forEach(icon => {
                icon.style.animation = 'heartbeat 1.5s infinite';
            });
        });
        
        // Handle touch gestures for mobile
        let touchStartX = 0;
        let touchEndX = 0;
        
        document.addEventListener('touchstart', e => {
            touchStartX = e.changedTouches[0].screenX;
        }, false);
        
        document.addEventListener('touchend', e => {
            touchEndX = e.changedTouches[0].screenX;
            handleSwipe();
        }, false);
        
        function handleSwipe() {
            const swipeThreshold = 50;
            const diff = touchStartX - touchEndX;
            
            if (Math.abs(diff) > swipeThreshold) {
                const pages = ['welcome', 'story', 'gallery', 'messages', 'invitation', 'secret'];
                if (responseUnlocked) pages.push('response');
                
                const currentPage = document.querySelector('.page.active').id;
                const currentIndex = pages.indexOf(currentPage);
                
                if (diff > 0 && currentIndex < pages.length - 1) {
                    // Swipe left - go to next page
                    changePage(pages[currentIndex + 1]);
                } else if (diff < 0 && currentIndex > 0) {
                    // Swipe right - go to previous page
                    changePage(pages[currentIndex - 1]);
                }
            }
        }
    </script>
</body>
</html>